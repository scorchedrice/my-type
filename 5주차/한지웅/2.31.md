# ğŸ“Œ 2.31 í•¨ìˆ˜ì— ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ë°ì½”ë ˆì´í„° í•¨ìˆ˜ê°€ ìˆë‹¤.

> 1. ë°ì½”ë ˆì´í„°
> 2. nest.jsì—ì„œì˜ ë°ì½”ë ˆì´í„°

## ë°ì½”ë ˆì´í„°

ë°ì½”ë ˆì´í„°ëŠ” í•¨ìˆ˜ë¥¼ í•¨ìˆ˜ë¡œ ê°ì‹¸ëŠ” ê¸°ëŠ¥ì„ í•œë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤. ë”°ë¼ì„œ, ë°˜ë³µë˜ëŠ” ê¸°ëŠ¥ì„ ë°ì½”ë ˆì´í„°ë¡œ ë§Œë“¤ì–´ íš¨ìœ¨ì ì¸ ì½”ë“œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.

```ts
class A {
  eat() {
    console.log('start')
    console.log('eat')
    console.log('end')
  }
  
  work() {
    console.log('start')
    console.log('work')
    console.log('end')
  }
}

function startAndEnd<This, Args extends any[], Return>(
  originalMethod: (this: This, ...args: Args) => Return,
  context: ClassMethodDecoratorContext<This, (this: This, ...args: Args) => Return>
) {
  function replacementMethod(this: This, ...args: Args): Return {
    console.log('start');
    const result = originalMethod.call(this, ...args);
    console.log('end');
    return result
  }
  return replacementMethod;
}

class B {
  @startAndEnd
  eat() {
    console.log('eat')
  }
  
  @startAndEnd
  work() {
    console.log('work')
  }
}
```

ìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´, class A ì™€ class BëŠ” ê²°ë¡ ì ìœ¼ë¡œ ë™ì¼í•œ classì´ë‹¤.

ì¤‘ìš”í•œ ì ì€ ê²°êµ­ ë°ì½”ë ˆì´í„°ëŠ” **í•¨ìˆ˜**ë¼ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤. (ë‹¨, ê³ ì°¨í•¨ìˆ˜ ì‚¬ìš© í•„ìš”)

### ë°ì½”ë ˆì´í„°ì˜ ì¢…ë¥˜

contextì˜ íƒ€ì…ì„ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```ts
type Context = {
  kind : string;
  name : string | symbol;
  access : {
    get?() : unknown;
    set?(value: unknown): void;
    has?(value: unknown): boolean;
  };
  private?: boolean;
  static?: boolean;
  addInitializer?(initializer: () => void): void;
}
```

ì—¬ê¸°ì„œ kindëŠ” í´ë˜ìŠ¤ ëŒ€ìƒ ë°ì½”ë ˆì´í„°ì¸ì§€, ë©”ì„œë“œ ëŒ€ìƒ ë°ì½”ë ˆì´í„°ì¸ì§€ ë“±ì˜ ì¢…ë¥˜ë¥¼ ì˜ë¯¸í•œë‹¤.

ì´ íƒ€ì…ì„ ë³´ë©´ ë°ì½”ë ˆì´í„°ë¥¼ ìƒì„±í•  ë•Œ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ìƒì„±í•  ì§€ ë°©ë²•ì„ ì•Œ ìˆ˜ ìˆë‹¤.

classë¥¼ ì‘ì„±í•  ë•Œ, ë°˜ë³µë˜ëŠ” ê³¼ì •ì´ ìˆì„ ë•Œ ë°ì½”ë ˆì´í„°ë¥¼ í™œìš©í•œë‹¤ë©´ íš¨ê³¼ì  ì½”ë“œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.


## nestì—ì„œì˜ ë°ì½”ë ˆì´í„°

ë°ì½”ë ˆì´í„°ëŠ” nest.jsì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```ts
// todo.entity.ts
import {Column, Entity, PrimaryGeneratedColumn} from "typeorm";
import {WorkStatusType} from "../../common/types/workTypes";

@Entity()
export class WorksModel {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  workName: string;

  @Column()
  workDescription: string;

  @Column()
  workStatus: WorkStatusType;
}
```

```ts
// todo.controller.ts
import {Controller, Get, Body, Param, Delete, ParseIntPipe, Patch, Post, Put} from '@nestjs/common';
import { WorksService } from './works.service';
import {WorkStatusType} from "../common/types/workTypes";

@Controller('works')
export class WorksController {
  constructor(private readonly worksService: WorksService) {}

  @Get()
  getWorks() {
    return this.worksService.getAllWorks();
  }

  @Patch(':id')
  updateWorkStatus(
    @Param('id', ParseIntPipe) id: number,
    @Body('newStatus') newStatus: WorkStatusType,
  ) {
    return this.worksService.updateWorkStatus(id, newStatus);
  }

  @Post()
  createWork(
    @Body('workName') workName: string,
    @Body('workDescription') workDescription: string,
  ) {
    return this.worksService.createWork(workName, workDescription);
  }

  @Put(':id')
  updateWork(
    @Param('id', ParseIntPipe) id: number,
    @Body('newWorkName') newWorkName?: string,
    @Body('newWorkDescription')newWorkDescription?: string,
  ) {
    return this.worksService.updateWork(id, newWorkName, newWorkDescription)
  }

  @Delete(':id')
  deleteWork(
    @Param('id', ParseIntPipe) id: number) {
      return this.worksService.deleteWork(id);
  }
}
```

ì´ì™€ ê°™ì€ ë°ì½”ë ˆì´í„°ê°€ ì‹¤ì œë¡œ ì ê·¹ í™œìš©ë˜ëŠ” í”„ë ˆì„ì›Œí¬ê°€ ë„ë¦¬ ì‚¬ìš©ë˜ê³  ìˆìœ¼ë¯€ë¡œ, ì–¸ì œ ì´ëŸ° ê²ƒì„ ì‚¬ìš©í•˜ê³ , ì–´ë–¤ í”„ë ˆì„ì›Œí¬ì— ì‚¬ìš©ëœë‹¤ ì •ë„ëŠ” ì´í•´í•˜ê³  ìˆì.

# ğŸ’¡ê²°ë¡ 

- ë°ì½”ë ˆì´í„°ë¼ëŠ” ê°œë…ì„ í•™ìŠµí–ˆë‹¤.
  - ë°˜ë³µë˜ëŠ” ë¡œì§ì„ ì¤„ì´ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ê¸°ì— ì í•©í•˜ë‹¤.
  - í´ë˜ìŠ¤ ì‘ì„±ì— í™œìš© ê°€ëŠ¥í•˜ë‹¤.
  - nestì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ê°€ ì´ë¥¼ ì ê·¹ í™œìš©í•œë‹¤.

# ğŸ“š Ref

- ë³¸ ë¬¸ì„œëŠ” `ì¡°í˜„ì˜. (2023). íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ êµê³¼ì„œ. ê¸¸ë²—`ì„ í•™ìŠµí•˜ê³  ìš”ì•½ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.