# 📌 2.4. 배열 말고 튜플도 있다.

>- [배열 타이핑](#배열-타이핑)
>- [배열에서의 타입추론](#배열에서의-타입추론)
>- [튜플](#튜플)
>  - [튜플타이핑](#튜플-타이핑)
>  - [옵셔널](#옵셔널)
>- [결론](#결론)

## 배열 타이핑

만약 긴 배열이 존재한다면, 각 요소를 하나하나 타이핑해줘야할까?

배열의 경우 다음 두가지의 방식으로 타입을 선언할 수 있다.

1. `타입[]`
2. `Array<타입>` : 제네릭

```ts
const arr1: number[] = [1,2,3];
const arr2: (string|number)[] = ['1',2, '3'];
const arr3: Array<string> = ['1', '2', '3'];
const arr4: Array<string|number> = [1,2,'3'];
```

여러가지의 타입이 공존하는 경우엔 `|`으로 표시한다.

## 배열에서의 타입추론

배열에서도 타입추론은 정상적으로 진행된다. 요소들의 타입을 토대로 추론된다.

특이사항으론 빈 배열 `[]`의 경우엔 `any[]`으로 추론된다.

## 튜플

튜플은 각 요소 자리에 타입을 고정한 배열이다. 즉, 각 자리마다 어떤것이 위치해야하는지 표기한 것이다.

### 튜플 타이핑

일반적인 배열은 다음과 같은 문제가 존재한다.

```ts
const arr : number[] = [1,2,3]; // index는 0,1,2
arr.toFixed(3); // 존재하지 않는 index, undefined에 toFixed 메서드를 사용 가능한 이슈
```

이러한 이슈가 발생하는 이유는 타입스크립트가 arr 자체를 `number`들로 추론했기 때문이다. 때문에, `undefined`가 오더라도 `number`에서 사용하는 메서드를 사용할 수 있는 것이다. 

튜플은 이와같은 이슈를 방지하는 것을 목적으로 일반적인 배열 타입 검사보다 정교한 타입 검사가 필요한 경우 사용한다.

```ts
const arr: [number, boolean, string] = [1, false, 'hi'];
arr[0] = 3;
// arr.toFixed(3) // 3번 인덱스의 타입은 지정되지 않았으므로 에러 반환
// arr[2] = 5; // 2번 인덱스의 타입 string과 다르기 때문에 오류가 난다.
// arr[3] = 'no' // 3번 인덱스의 타입은 지정되지 않았으므로(undefined) 오류가 난다.
arr.push('yes'); // 실행시 오류가 나지 않는다!!
```

특이한점으론 `push`, `shift` 등 길이를 바꾸는 메서드가 사용 가능하다는 점인데, 이를 방지하기 위해선 `readonly`를 활용하면 된다.

```ts
const arr: readonly [number, boolean, string] = [1, false, 'hi'];
arr.push('yes') // error!
```

또한 튜플에는 전개연산자 등을 사용할 수 있다.

만약 앞에 두개만 타입이 정해져있고 그 나머지는 `boolean`이 와야하는 배열이 있다고 가정해보자.

```ts
const strNumBools: [string, number, ...boolean[]]
 = ['hi', 123, true, true, false];
```

또한 중간에만 일정한 타입이 오는 경우도 이처럼 작성 가능하다.

```ts
const tuple2: [string, ...number[], boolean] = ["hi", 123, 3434, false];
```

### 옵셔널

튜플에서 옵셔널 `?`을 활용하면 해당 자리를 생략할 수 있다.

```ts
let tuple: [number, boolean?, string?] = [1, false, 'hi'];
tuple = [3, true]; // boolean이 옵셔널
tuple = [5]; // boolean , string이 옵셔널
// tuple = [7, 'no']; // 없을꺼면 완전히 없어야한다. boolean | undefined 자리에 string이 온 것으로 인식
```

# 💡결론

- 배열에는 `타입[]`, `제네릭`으로 타입을 선언한다.
  - 해당 배열 전체를 해당 타입으로 인식하기에 인덱스 외의 값 `undefined` 에 해당 타입에서만 사용 가능한 메서드를 적용할 수 있는 등의 이슈가 발생할 수 있다.
    - 이를 튜플을 활용하여 해결할 수 있다.
      - 튜플에 옵셔널, readonly등을 활용하여 커스텀을 할 수 있다. 

# 📚 Ref

- 본 문서는 `조현영. (2023). 타입스크립트 교과서. 길벗`을 학습하고 요약 정리하였습니다.