# ğŸ“Œ 3.5 forEach ë§Œë“¤ê¸°

1. myForEach ë©”ì„œë“œ ì—†ì–´ì„œ ì•ˆë¨. ê°™ì€ ì´ë¦„ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë³‘í•©í•´ì•¼í•¨.

```ts
[1, 2, 3].myForEach(() => {})
// Property 'myForEach' does not exist on type 'number[]'. Did you mean 'forEach'?
```

2. ì¸ìˆ˜ë¥¼ ë„£ì„ ìˆ˜ ìˆê²Œ ë§¤ê°œë³€ìˆ˜ë¥¼ íƒ€ì´í•‘í•´ì•¼í•¨.

```ts
[1, 2, 3].myForEach(() => {});
// Expected 0 arguments, but got 1.

interface Array<T> {
  myForEach(): void;
}
```

3. forEachë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ 3ê°œì´ê³  ìˆœì„œëŒ€ë¡œ ìš”ì†Œ ê°’, ì¸ë±ìŠ¤, ì›ë³¸ ë°°ì—´ì„.

```ts
[1, 2, 3].myForEach(() => {});
[1, 2, 3].myForEach((v, i, a) => { console.log(v, i, a) });
// Argument of type '(v: any, i: any, a: any) => void' is not assignable to parameter of type '() => void'.
[1, 2, 3].myForEach((v, i) => console.log(v));
// Argument of type '(v: any, i: any) => void' is not assignable to parameter of type '() => void'.
[1, 2, 3].myForEach((v) => 3);
// Parameter 'v' implicitly has an 'any' type.
// Type 'number' is not assignable to type 'void'.

interface Array<T> {
  myForEach(callback: () => void): void;
}
```

4. vì™€ a ëª¨ë‘ number ê¸°ë°˜ìœ¼ë¡œ ê³ ì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•´ì•¼ í•˜ëŠ”ë° ë°œìƒí•˜ì§€ ì•Šê³  ë°œìƒí•˜ì§€ ì•Šì•„ì•¼í•˜ëŠ”ë° ë°œìƒí•˜ëŠ” ë¬¸ì œ ë°œìƒ -> ì œë„ˆë¦­ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜ì •

```ts
[1, 2, 3].myForEach(() => {});
[1, 2, 3].myForEach((v, i, a) => { console.log(v, i, a) });
[1, 2, 3].myForEach((v, i) => console.log(v));
[1, 2, 3].myForEach((v) => 3);
['1', '2', '3'].myForEach((v) => {
  console.log(v.slice(0));
});
// Property 'slice' does not exist on type 'number'.
[true, 2, '3'].myForEach((v) => {
  if (typeof v === 'string') {
    v.slice(0);
  } else {
    v.toFixed();
  }
});
// Property 'slice' does not exist on type 'never'.

interface Array<T> {
  myForEach(callback: (v: number, i: number, a: number[]) => void): void;
}
```

5. ìµœì¢…: ì¡ì§€ ëª»í–ˆë˜ ì—ëŸ¬ ì¡ëŠ”ê±° í™•ì¸í•  ìˆ˜ ìˆìŒ.

```ts
(...)
[true, 2, '3'].myForEach((v) => {
  if (typeof v === 'string') {
    v.slice(0);
  } else {
    v.toFixed();
  }
});
// Property 'toFixed' does not exist on type 'number | boolean'. Property 'toFixed' does not exist on type 'false'.

interface Array<T> {
  myForEach(callback: (v: T, i: number, a: T[]) => void): void;
}
```

### ìœ„ myForEachê°€ ì—ëŸ¬ê°€ ì—†ë‹¤ê³  í™•ì‹ í•  ìˆ˜ ìˆì„ê¹Œ?

- lib.es5.d.ts ë³´ë©´ ê±°ì˜ ë¹„ìŠ·í•œë° `thisArg?: any`ë¼ëŠ” ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ ìˆëŠ”ê±° í™•ì¸í•  ìˆ˜ ìˆìŒ.
- thisArgëŠ” ì½œë°± í•¨ìˆ˜ ì„ ì–¸ë¬¸ì—ì„œ thisë¥¼ ì‚¬ìš©í•  ë•Œ, this ê°’ì„ ì§ì ‘ ë°”ê¿€ ìˆ˜ ìˆê²Œ í•˜ëŠ” ë¶€ë¶„
- ê°’ì„ ë°”ê¾¸ì§€ ì•Šìœ¼ë©´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” thisê°€ windowê°€ ë˜ê³ , Node.jsì—ì„œëŠ” global, strict ëª¨ë“œ("use strict")ì—ì„œëŠ” undefinedê°€ ë¨.

```ts
interface Array<T> {
  forEach(callbackfn: (value: T, index: number, array: T[]) => void, thisArg?: any): void;
}
```

- ê·¸ëŸ¬ë‚˜ lib.es5.d.tsì˜ íƒ€ì´í•‘ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ thisì—ì„œ ì—ëŸ¬ ë°œìƒ

```ts
[1, 2, 3].forEach(function() {
  console.log(this);
});
// 'this' implicitly has type 'any' because it does not have a type annotation.
```

ì•„ë˜ëŠ” this íƒ€ì´í•‘ì´ ì œëŒ€ë¡œ ë˜ê²Œ ìˆ˜ì •í•œ ì½”ë“œ

```ts
(...)
[1, 2, 3].myForEach(function() {
  console.log(this);
});
// this: Window
[1, 2, 3].myForEach(function() {
  console.log(this);
}, { a: 'b' });
/*
this: {
    a: string;
}
*/
interface Array<T> {
  myForEach<K = Window>(callback: (this: K, v: T, i: number, a: T[]) => void, thisArg?: K): void;
}
```

- íƒ€ì… ë§¤ê°œë³€ìˆ˜ Kë¥¼ `myForEach<K>` ìë¦¬ì— ì„ ì–¸, `Array<T, K>`ë¥¼ ìˆ˜ì •í•  ìˆ˜ ì—†ëŠ” ì´ìœ ëŠ” lib.es5.d.tsì— ìˆëŠ” ë°°ì—´ì˜ ì¸í„°í˜ì´ìŠ¤ì™€ íƒ€ì… ë§¤ê°œë³€ìˆ˜ê°€ ë™ì¼í•´ì•¼í•˜ê¸° ë•Œë¬¸ì„.
- thisArgë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ thisì˜ íƒ€ì…ì´ Windowê°€ ë¨. thisArgë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´ ê·¸ ê°’ì˜ íƒ€ì…ì´ thisì˜ íƒ€ì…
- ìœ„ íƒ€ì…ë„ ì •í™•í•˜ì§€ ì•ŠìŒ. ex) Node.jsì—ì„œëŠ” windowê°€ ì•„ë‹ˆë¼ globalì´ì—¬ì•¼í•¨. ì‹¤í–‰í™˜ê²½ì— ë”°ë¼ thisê°€ ë³€í•œë‹¤.
- 100% ì •í™•í•œ íƒ€ì…ì¸ì§€ ì•Œ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì—†ìŒ. ê·¸ëƒ¥ ì˜ ë§Œë“¤ì—ˆì„ ê²ƒì´ë¼ ë¯¿ê³  ì‚¬ìš©í•˜ëŠ” ê±°ì„.
- ë°°ì—´ì— myMapì´ë¼ëŠ” ë©”ì„œë“œ êµ¬í˜„ ì•ˆí•´ì„œ ì½”ë“œ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì„ ê±°ì„. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ íƒ€ì…ì—ëŸ¬ê°€ ì—†ë”ë¼ë„ ì‹¤ì œë¡œ ì‹¤í–‰ë¨ì´ ë³´ì¥ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ì ì„ ìˆ™ì§€í•´ì•¼í•¨.
